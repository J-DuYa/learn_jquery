#### Deferred的观察者模式

```javascript
var dtd = $.Deferred();

function fn1(value) {
    console.log("fn1 says: " + value);
}

function fn2(value) {
    console.log("fn2 says: " + value);
}

// 订阅
dtd.done(fn1, fn2);

// 发布
dtd.resolve("hello");

// output
// fn1 says: hello
// fn2 says: hello
```


#### Deferred模型的mini版

```javascript
jQuery.extend({
	Deferred: function () {
		var tuples = [
				["resolve", "done", jQuery.Callbacks("once memory"), "resolved"],
				["reject", "fail", jQuery.Callbacks("once memory"), "rejected"],
				["notify", "progress", jQuery.Callbacks("memory")]
			],
			
			deferred = {};

		// 遍历二维数组，创建3个Callbacks对象
		jQuery.each(tuples, function (i, tuple) {
			var list = tuple[2];

			deferred[tuple[1]] = list.add;

			deferred[tuple[0]] = list.fire;
		});

		return deferred;
	}
});
```
* 通过迭代二维数组创建了3个Callbacks对象，等同于以下代码：

```javascript
// 第一个Callbacks对象：订阅done，发布resolve
var callback1 = jQuery.Callbacks("once memory"); 
callback1.done = callback1.add; 
callback1.resolve = callback1.fire

// 第二个Callbacks对象：订阅fail，发布reject
var callback2 = jQuery.Callbacks("once memory"); 
callback2.fail = callback2.add; 
callback2.reject = callback2.fire

// 第三个Callbacks对象：订阅progress，发布notify
var callback3 = jQuery.Callbacks("memory"); 
callback3.progress = callback3.add; 
callback3.notify = callback3.fire
```

