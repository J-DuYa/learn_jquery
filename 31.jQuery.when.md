#### jQuery.when()

基本用法:when()接收一个或多个Deferred对象作为参数，或者接收一个javascript对象。返回Promise对象

```javascript
// 成功后执行回调，处理服务端返回的data数据
var callback = function (data) {
    // do something
};

// 这里接收一个$.post返回的对象
$.when($.post("http://localhost/test", {name: "tiantian", age: 2})).done(callback);
```


```javascript
var callback = function (data) {
    console.log(data.testing);
};

// 传递一个js对象作为参数，这时只会触发done中的回调，不会触发fail中的回调
$.when({testing: 123}).done(callback);

// output
// 123
```

In the case where multiple Deferred objects are passed to jQuery.when(), the method returns the Promise from a new "master" Deferred object that tracks the aggregate state of all the Deferreds it has been passed. The method will resolve its master Deferred as soon as all the Deferreds resolve, or reject the master Deferred as soon as one of the Deferreds is rejected. If the master Deferred is resolved, the doneCallbacks for the master Deferred are executed. The arguments passed to the doneCallbacks provide the resolved values for each of the Deferreds, and matches the order the Deferreds were passed to jQuery.when()

> 当when接收多个Deferred对象时，方法返回的这个Promise对象包含一个主（master）Deferred对象，它跟踪着所有传递的Deferreds对象，当传递的Deferred对象全部resolve时，这个主Deferred对象才resolve。或者是有一个Deferred对象rejected时主rejected对象立刻rejected。如果主rejected对象resolved会触发回调执行，回调函数的参数按照顺序匹配每一个Deferreds对象。

接收多个参数

```javascript
var fn1 = function () {
    var dtd = $.Deferred();
    setTimeout(function () {
        console.log('fn1');
        dtd.resolve();
    }, 1000);
    return dtd.promise();
}

var fn2 = function () {
    var dtd = $.Deferred();
    setTimeout(function () {
        console.log('fn2');
        dtd.resolve();
    }, 2000);
    return dtd.promise();
}

var callback = function () {
    console.log("callback");
}

$.when(fn1(), fn2()).done(callback);

// output
// fn1
// fn2
// callback
```

